{"ast":null,"code":"// import { useEffect, useState } from \"react\";\n// import { Link, useNavigate } from \"react-router-dom\";\n// import logo from \"../../images/logo.svg\";\n// import { onLogin } from \"../../services/actions/user\";\n// import { useStore } from \"../../services/StoreProvider\";\n// import Input from \"./Input\";\n// import { isPassword, isEmail } from \"../../utils/validation\";\n\n// function Login() {\n//   const [state, dispatch] = useStore();\n//   const { authMessage } = state;\n//   const { loggedIn } = state;\n//   const [disabled, setDisabled] = useState(false);\n\n//   const [error, setError] = useState({ email: \"\", password: \"\" });\n//   const [formData, setFormData] = useState({ email: \"\", password: \"\" });\n//   const [buttonProps, setButtonProps] = useState({\n//     disabled: true,\n//     className: \"auth__submit_disabled\",\n//   });\n//   const navigate = useNavigate();\n\n//   const handleChange = (e) => {\n//     let errorMessage = e.target.validationMessage;\n//     if (e.target.name === \"email\") {\n//       errorMessage = errorMessage || isEmail(e.target.value);\n//       setError({\n//         ...error,\n//         email: errorMessage,\n//       });\n//     } else {\n//       errorMessage = errorMessage || isPassword(e.target.value);\n//       setError({\n//         ...error,\n//         password: errorMessage,\n//       });\n//     }\n\n//     setFormData({ ...formData, [e.target.name]: e.target.value });\n//     const haveSomeError = Object.keys(error).some((key) => formData[key] === \"\" || errorMessage);\n//     setButtonProps({\n//       disabled: haveSomeError,\n//       className: haveSomeError ? \"auth__submit_disabled\" : \"auth__submit\",\n//     });\n//   };\n\n//   useEffect(() => {\n//     loggedIn && navigate(\"/movies\");\n//   }, [loggedIn, navigate]);\n\n//   const handleSubmit = (e) => {\n//     e.preventDefault();\n//     setDisabled(true);\n//     setButtonProps({ disabled: true, className: \"auth__submit_disabled\" });\n//     onLogin(dispatch, formData, state).then(() => {\n//       setTimeout(() => {\n//         setDisabled(false);\n//         setButtonProps({ disabled: false, className: \"auth__submit\" });\n//       }, 2000);\n//     });\n//   };\n\n//   return (\n//     <section className=\"auth\">\n//       <Link to=\"/\" className=\"auth__logo\">\n//         <img src={logo} alt=\"Логотип\" />\n//       </Link>\n//       <h2 className=\"auth__title\">Рады видеть!</h2>\n//       <form className=\"auth__form\" onSubmit={handleSubmit}>\n//         <div className=\"auth__input-container\">\n//           <Input\n//             type=\"email\"\n//             name=\"email\"\n//             title=\"E-mail\"\n//             onChange={handleChange}\n//             error={error.email}\n//             disabled={disabled}\n//           />\n//           <Input\n//             type=\"password\"\n//             name=\"password\"\n//             title=\"Пароль\"\n//             onChange={handleChange}\n//             error={error.password}\n//             disabled={disabled}\n//           />\n//         </div>\n//         <span className=\"auth__message\">{authMessage}</span>\n//         <button\n//           className={`${buttonProps.className} text`}\n//           disabled={disabled || buttonProps.disabled}\n//         >\n//           Войти\n//         </button>\n//         <div className=\"auth__link-container\">\n//           <p className=\"text color_text\">Ещё не зарегистрированы?</p>\n//           <Link to=\"/sign-up\" className=\"auth__link text\">\n//             Регистрация\n//           </Link>\n//         </div>\n//       </form>\n//     </section>\n//   );\n// }\n\n// export default Login;","map":{"version":3,"names":[],"sources":["/Users/sasha/Desktop/dev/movies-explorer-frontend/src/components/Login/Login.js"],"sourcesContent":["// import { useEffect, useState } from \"react\";\n// import { Link, useNavigate } from \"react-router-dom\";\n// import logo from \"../../images/logo.svg\";\n// import { onLogin } from \"../../services/actions/user\";\n// import { useStore } from \"../../services/StoreProvider\";\n// import Input from \"./Input\";\n// import { isPassword, isEmail } from \"../../utils/validation\";\n\n// function Login() {\n//   const [state, dispatch] = useStore();\n//   const { authMessage } = state;\n//   const { loggedIn } = state;\n//   const [disabled, setDisabled] = useState(false);\n\n//   const [error, setError] = useState({ email: \"\", password: \"\" });\n//   const [formData, setFormData] = useState({ email: \"\", password: \"\" });\n//   const [buttonProps, setButtonProps] = useState({\n//     disabled: true,\n//     className: \"auth__submit_disabled\",\n//   });\n//   const navigate = useNavigate();\n\n//   const handleChange = (e) => {\n//     let errorMessage = e.target.validationMessage;\n//     if (e.target.name === \"email\") {\n//       errorMessage = errorMessage || isEmail(e.target.value);\n//       setError({\n//         ...error,\n//         email: errorMessage,\n//       });\n//     } else {\n//       errorMessage = errorMessage || isPassword(e.target.value);\n//       setError({\n//         ...error,\n//         password: errorMessage,\n//       });\n//     }\n\n//     setFormData({ ...formData, [e.target.name]: e.target.value });\n//     const haveSomeError = Object.keys(error).some((key) => formData[key] === \"\" || errorMessage);\n//     setButtonProps({\n//       disabled: haveSomeError,\n//       className: haveSomeError ? \"auth__submit_disabled\" : \"auth__submit\",\n//     });\n//   };\n\n//   useEffect(() => {\n//     loggedIn && navigate(\"/movies\");\n//   }, [loggedIn, navigate]);\n\n//   const handleSubmit = (e) => {\n//     e.preventDefault();\n//     setDisabled(true);\n//     setButtonProps({ disabled: true, className: \"auth__submit_disabled\" });\n//     onLogin(dispatch, formData, state).then(() => {\n//       setTimeout(() => {\n//         setDisabled(false);\n//         setButtonProps({ disabled: false, className: \"auth__submit\" });\n//       }, 2000);\n//     });\n//   };\n\n//   return (\n//     <section className=\"auth\">\n//       <Link to=\"/\" className=\"auth__logo\">\n//         <img src={logo} alt=\"Логотип\" />\n//       </Link>\n//       <h2 className=\"auth__title\">Рады видеть!</h2>\n//       <form className=\"auth__form\" onSubmit={handleSubmit}>\n//         <div className=\"auth__input-container\">\n//           <Input\n//             type=\"email\"\n//             name=\"email\"\n//             title=\"E-mail\"\n//             onChange={handleChange}\n//             error={error.email}\n//             disabled={disabled}\n//           />\n//           <Input\n//             type=\"password\"\n//             name=\"password\"\n//             title=\"Пароль\"\n//             onChange={handleChange}\n//             error={error.password}\n//             disabled={disabled}\n//           />\n//         </div>\n//         <span className=\"auth__message\">{authMessage}</span>\n//         <button\n//           className={`${buttonProps.className} text`}\n//           disabled={disabled || buttonProps.disabled}\n//         >\n//           Войти\n//         </button>\n//         <div className=\"auth__link-container\">\n//           <p className=\"text color_text\">Ещё не зарегистрированы?</p>\n//           <Link to=\"/sign-up\" className=\"auth__link text\">\n//             Регистрация\n//           </Link>\n//         </div>\n//       </form>\n//     </section>\n//   );\n// }\n\n// export default Login;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}