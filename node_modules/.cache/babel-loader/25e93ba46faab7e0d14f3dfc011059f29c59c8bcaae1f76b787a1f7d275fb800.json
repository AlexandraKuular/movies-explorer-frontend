{"ast":null,"code":"var _jsxFileName = \"/Users/sasha/Desktop/dev/movies-explorer-frontend/src/components/Login/Login.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport logo from \"../../images/logo.svg\";\nimport { onLogin } from \"../../services/actions/user\";\nimport { useStore } from \"../../services/StoreProvider\";\nimport Input from \"./Input\";\nimport { isPassword, isEmail } from \"../../utils/validation\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  const [state, dispatch] = useStore();\n  const {\n    authMessage\n  } = state;\n  const {\n    loggedIn\n  } = state;\n  const [disabled, setDisabled] = useState(false);\n  const [error, setError] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const [buttonProps, setButtonProps] = useState({\n    disabled: true,\n    className: \"auth__submit_disabled\"\n  });\n  const navigate = useNavigate();\n  const handleChange = e => {\n    let errorMessage = e.target.validationMessage;\n    if (e.target.name === \"email\") {\n      errorMessage = errorMessage || isEmail(e.target.value);\n      setError({\n        ...error,\n        email: errorMessage\n      });\n    } else {\n      errorMessage = errorMessage || isPassword(e.target.value);\n      setError({\n        ...error,\n        password: errorMessage\n      });\n    }\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n    const haveSomeError = Object.keys(error).some(key => formData[key] === \"\" || errorMessage);\n    setButtonProps({\n      disabled: haveSomeError,\n      className: haveSomeError ? \"auth__submit_disabled\" : \"auth__submit\"\n    });\n  };\n  useEffect(() => {\n    loggedIn && navigate(\"/movies\");\n  }, [loggedIn, navigate]);\n  const handleSubmit = e => {\n    e.preventDefault();\n    setDisabled(true);\n    setButtonProps({\n      disabled: true,\n      className: \"auth__submit_disabled\"\n    });\n    onLogin(dispatch, formData, state).then(() => {\n      setTimeout(() => {\n        setDisabled(false);\n        setButtonProps({\n          disabled: false,\n          className: \"auth__submit\"\n        });\n      }, 2000);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"auth\",\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: \"/\",\n      className: \"auth__logo\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: logo,\n        alt: \"\\u041B\\u043E\\u0433\\u043E\\u0442\\u0438\\u043F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"auth__title\",\n      children: \"\\u0420\\u0430\\u0434\\u044B \\u0432\\u0438\\u0434\\u0435\\u0442\\u044C!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"auth__form\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auth__input-container\",\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          type: \"email\",\n          name: \"email\",\n          title: \"E-mail\",\n          onChange: handleChange,\n          error: error.email,\n          disabled: disabled\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"password\",\n          name: \"password\",\n          title: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n          onChange: handleChange,\n          error: error.password,\n          disabled: disabled\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"auth__message\",\n        children: authMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `${buttonProps.className} text`,\n        disabled: disabled || buttonProps.disabled,\n        children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auth__link-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text color_text\",\n          children: \"\\u0415\\u0449\\u0451 \\u043D\\u0435 \\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u044B?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/sign-up\",\n          className: \"auth__link text\",\n          children: \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"/1EZV521FelP6fiiL8q/wue6bKc=\", false, function () {\n  return [useStore, useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useEffect","useState","Link","useNavigate","logo","onLogin","useStore","Input","isPassword","isEmail","jsxDEV","_jsxDEV","Login","_s","state","dispatch","authMessage","loggedIn","disabled","setDisabled","error","setError","email","password","formData","setFormData","buttonProps","setButtonProps","className","navigate","handleChange","e","errorMessage","target","validationMessage","name","value","haveSomeError","Object","keys","some","key","handleSubmit","preventDefault","then","setTimeout","children","to","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","title","onChange","_c","$RefreshReg$"],"sources":["/Users/sasha/Desktop/dev/movies-explorer-frontend/src/components/Login/Login.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport logo from \"../../images/logo.svg\";\nimport { onLogin } from \"../../services/actions/user\";\nimport { useStore } from \"../../services/StoreProvider\";\nimport Input from \"./Input\";\nimport { isPassword, isEmail } from \"../../utils/validation\";\n\nfunction Login() {\n  const [state, dispatch] = useStore();\n  const { authMessage } = state;\n  const { loggedIn } = state;\n  const [disabled, setDisabled] = useState(false);\n\n  const [error, setError] = useState({ email: \"\", password: \"\" });\n  const [formData, setFormData] = useState({ email: \"\", password: \"\" });\n  const [buttonProps, setButtonProps] = useState({\n    disabled: true,\n    className: \"auth__submit_disabled\",\n  });\n  const navigate = useNavigate();\n\n  const handleChange = (e) => {\n    let errorMessage = e.target.validationMessage;\n    if (e.target.name === \"email\") {\n      errorMessage = errorMessage || isEmail(e.target.value);\n      setError({\n        ...error,\n        email: errorMessage,\n      });\n    } else {\n      errorMessage = errorMessage || isPassword(e.target.value);\n      setError({\n        ...error,\n        password: errorMessage,\n      });\n    }\n\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n    const haveSomeError = Object.keys(error).some((key) => formData[key] === \"\" || errorMessage);\n    setButtonProps({\n      disabled: haveSomeError,\n      className: haveSomeError ? \"auth__submit_disabled\" : \"auth__submit\",\n    });\n  };\n\n  useEffect(() => {\n    loggedIn && navigate(\"/movies\");\n  }, [loggedIn, navigate]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setDisabled(true);\n    setButtonProps({ disabled: true, className: \"auth__submit_disabled\" });\n    onLogin(dispatch, formData, state).then(() => {\n      setTimeout(() => {\n        setDisabled(false);\n        setButtonProps({ disabled: false, className: \"auth__submit\" });\n      }, 2000);\n    });\n  };\n\n  return (\n    <section className=\"auth\">\n      <Link to=\"/\" className=\"auth__logo\">\n        <img src={logo} alt=\"Логотип\" />\n      </Link>\n      <h2 className=\"auth__title\">Рады видеть!</h2>\n      <form className=\"auth__form\" onSubmit={handleSubmit}>\n        <div className=\"auth__input-container\">\n          <Input\n            type=\"email\"\n            name=\"email\"\n            title=\"E-mail\"\n            onChange={handleChange}\n            error={error.email}\n            disabled={disabled}\n          />\n          <Input\n            type=\"password\"\n            name=\"password\"\n            title=\"Пароль\"\n            onChange={handleChange}\n            error={error.password}\n            disabled={disabled}\n          />\n        </div>\n        <span className=\"auth__message\">{authMessage}</span>\n        <button\n          className={`${buttonProps.className} text`}\n          disabled={disabled || buttonProps.disabled}\n        >\n          Войти\n        </button>\n        <div className=\"auth__link-container\">\n          <p className=\"text color_text\">Ещё не зарегистрированы?</p>\n          <Link to=\"/sign-up\" className=\"auth__link text\">\n            Регистрация\n          </Link>\n        </div>\n      </form>\n    </section>\n  );\n}\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}